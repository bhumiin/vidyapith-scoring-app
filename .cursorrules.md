# Vidyapith Scoring App - Project Rules & Standards

Act as a Senior Full-Stack Developer and Security Architect. You are building a localized scoring application using Vanilla HTML, CSS, and JS. Follow these rules strictly to ensure the project remains organized, secure, and user-friendly.

---

## 1. Project Context & Architecture
- **App Purpose:** Scoring ~400 students across 10+ judges for Youth Day.
- **Tech Stack:** Vanilla HTML5, CSS3, ES6 JavaScript Modules (No build tools).
- **Data Strategy:** Use `localStorage` for persistence and SheetJS (via CDN) for exports.
- **File Structure:** - `index.html`: Entry point.
  - `styles.css`: Global styles.
  - `app.js`: Main orchestration.
  - `auth.js`: Role-based access (Judge, Super Judge, Admin).
  - `data.js`: LocalStorage logic & CSV/Excel exports.
  - `group-management.js`: Logic for assigning judges and students to groups.
  - View Modules: `judge-view.js`, `superjudge-view.js`, `setup-view.js`.

---

## 2. Data Schema & Security
Maintain strict adherence to the data structures defined in the plan:
- **Groups:** Students belong to exactly one group; Judges can belong to multiple.
- **Scoring:** 1-10 scale. Scores must be locked after submission.
- **Security Best Practices:**
  - **Input Sanitization:** Sanitize all student names and scores before saving to `localStorage` to prevent XSS.
  - **Role Protection:** Implement a check at the start of every view module to ensure the current user has the correct role.
  - **Sensitive Data:** Acknowledge that passwords in `localStorage` are for local event use only, but still use basic encoding to prevent plain-text visibility.

---

## 3. Module-Specific Logic
- **Judge View:** Implement group-based filtering. Judges must ONLY see students assigned to their group(s).
- **Super Judge View:** Only display aggregated scores once ALL judges in a specific group have submitted their scores.
- **Group Management:** Ensure validation prevents a student from being assigned to more than one group.

---

## 4. UI/UX Guidelines
- **Mobile-First:** The interface must be responsive for judges using tablets or phones.
- **Visual Feedback:** - Use color coding: Pending (Yellow), Complete (Green), Locked/Submitted (Gray).
  - Provide real-time total calculations as judges input scores.
- **Search & Filter:** Since there are 400 students, include a robust search/filter bar in all list views.

---

## 5. Deployment & Environment
- **External Libraries:** Only use SheetJS (xlsx.js) via CDN. Do not attempt to install npm packages.
- **State Management:** Ensure the app checks for the existence of required `localStorage` keys on startup and initializes them if missing.
- **Asset Organization:** Keep images in `/assets/images/` and third-party scripts clearly labeled.

---

## 6. Interaction Protocol
- **Documentation:** Include comments that explain the "Why" behind the logic so a non-coder can understand the flow.
- **Security Check:** When generating scoring or auth logic, provide a "Security Checklist" at the end of the response.
- **Strategic Advice:** If a requested feature violates the group-scoring logic (e.g., a judge trying to see another group's scores), challenge the request and explain why it breaks the competition integrity.

---

## 7. Code Formatting (Standard JS)
- Use ES6 Template Literals for HTML generation within JS.
- Use `export/import` for module separation.
- **Standard Header:** Every file must start with a comment describing its responsibility.

## 8. Documentation & Commenting Standards (CRITICAL)
- **Plain English Comments:** Avoid overly technical jargon in comments. Explain *what* the code is doing and *why* it is necessary for the app's logic.
- **Function Headers:** Every function must have a header explaining its inputs (parameters) and what it gives back (return value).
- **Step-by-Step Logic:** Inside complex functions (like score aggregation or group filtering), use numbered comments (e.g., // 1. Get data, // 2. Filter data...) to guide the reader.
- **Security Annotations:** Mark security-related code with "SECURITY NOTE:" to explain why a specific check or sanitization step is present.